.TH tcpcongestdura 8  "2022-01-27" "USER COMMANDS"
.SH NAME
tcpcongestdura \- Measure tcp congestion state duration. Uses Linux eBPF/bcc.
.SH SYNOPSIS
.B tcpcongestdura [\-h] [\-T] [\-L] [\-R] [\-N] [\-d] [interval] [outputs]
.SH DESCRIPTION
this tool measures tcp sockets congestion control status duration, and
prints a summary one state by one along with total state change number.
  
It uses dynamic tracing of kernel tcp congestion control status 
updating functions,  and will need to be updated to match kernel changes.

The traced functions are only called when there is congestion state update,
and therefore have low overhead. we also use BPF map to store traced data 
to reduce overhead. See the OVERHEAD section for more details.
Since this uses BPF, only the root user can use this tool.
.SH REQUIREMENTS
CONFIG_BPF and bcc.
.SH OPTIONS
.TP
\-h
Print usage message.
.TP
\-T
Include a timestamp column.
.TP
\-L
Specify local tcp port range.
.TP
\-R
Specify remote tcp port range.
.TP
\-N
Output in nanoseconds.
.TP
\-d
Show congestion status duration distribution as histograms.
.SH EXAMPLES
.TP
Show all tcp sockets congestion status duration until Ctrl-C:
#
.B tcpcongestdura
.TP
Show all tcp sockets congestion status duration every 1 second and 10 times:
#
.B tcpcongestdura 1 10
.TP
Show only local port 3000-3006 congestion status duration every 1 second:
#
.B tcpcongestdura \-L 3000-3006  1
.TP
Show only remote port 5000-5005 congestion status duration every 1 second:
#
.B tcpcongestdura \-R 5000-5005  1
.TP
Show 1 second summaries, printed in nanoseconds, with timestamps:
#
.B tcpcongestdura \-NT 1
.TP
Show all tcp sockets congestion status duration as histograms:
#
.B tcpcongestdura \-d
.SH FIELDS
.TP
LAddrPort
local ip address and tcp socket port.
.TP
RAddrPort
remote ip address and tcp socket port.
.TP
Open_usecs
Total duration in open status for microseconds.
.TP
Dsod_usecs
Total duration in disorder status for microseconds.
.TP
Rcov_usecs
Total duration in recovery status for microseconds.
.TP
Cwr_usecs
Total duration in cwr status for microseconds.
.TP
Los_usecs
Total duration in loss status for microseconds.
.TP
Open_nsecs
Total duration in open status for nanoseconds.
.TP
Dsod_nsecs
Total duration in disorder status for nanoseconds.
.TP
Rcov_nsecs
Total duration in recovery status for nanoseconds.
.TP
Cwr_nsecs
Total duration in cwr status for nanoseconds.
.TP
Loss_nsecs
Total duration in loss status for nanoseconds.
.TP
Chgs
Total number of status change.
.TP
usecs
Range of microseconds for this bucket.
.TP
nsecs
Range of nanoseconds for this bucket.
.TP
count
Number of congestion status in this time range.
.TP
distribution
ASCII representation of the distribution (the count column).
.SH OVERHEAD
This traces the kernel tcp congestion status change functions. 
As called rate per second of these functions per socket is low(<10000), the 
overhead is also expected to be negligible. If you have an application that 
will create thousands of tcp connections, then test and understand overhead 
before use.
.SH SOURCE
This is from bcc.
.IP
https://github.com/iovisor/bcc
.PP
Also look in the bcc distribution for a companion _examples.txt file containing
example usage, output, and commentary for this tool.
.SH OS
Linux
.SH STABILITY
Unstable - in development.
.SH AUTHOR
jacky gan
.SH SEE ALSO
tcpretrans(8), tcpconnect(8), tcptop(8), tcpdrop(8)